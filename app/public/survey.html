<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>FriendFinder</title>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
  </head>

  <body>
    <div class="container">
      <h2 style="font-size: 3em; color: dodgerblue;">
        <i class="fa fa-linux"></i> Friend Finder
      </h2>
      <hr />

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"><strong>About You</strong></h3>
        </div>
        <div class="panel-body">
          <h4>Your Full Name</h4>
          <div class="input-group">
            <input
              id="formName"
              class="form-control"
              type="text"
              name="name"
              placeholder="John Smith"
            />
          </div>
          <br />
          <h4>Link to a Photo Image</h4>
          <div class="input-group">
            <input
              id="formImage"
              class="form-control"
              type="text"
              name="name"
              placeholder="http://yourphotolink.com.jpg/"
            />
          </div>
        </div>
      </div>
      <hr />

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"><strong>Questionnaire</strong></h3>
        </div>
        <div class="panel-body">

            <br />
          
          <h4><strong>Question 1</strong></h4>
          <h5>You are the first to take charge in social gatherings or group projects.</h5>
          <select class="chosen-select" id="Q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 2</strong></h4>
          <h5>You would rather spend go to the bar and catch the game than go to the club.</h5>
          <select class="chosen-select" id="Q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 3</strong></h4>
          <h5>You are energized when interacting with other people; being alone for extended periods of time drains your energy.</h5>
          <select class="chosen-select" id="Q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 4</strong></h4>
          <h5>You need a stimulating environment.</h5>
          <select  class="chosen-select" id="Q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 5</strong></h4>
          <h5>You consider yourself to be more practical than artistic.</h5>
          <select  class="chosen-select" id="Q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 6</strong></h4>
          <h5>You often find yourself lost in thought when you are walking in nature.</h5>
          <select  class="chosen-select" id="Q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 7</strong></h4>
          <h5>You are more of a natural improviser than a careful planner.</h5>
          <select  class="chosen-select" id="Q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 8</strong></h4>
          <h5>You prefer frontend design over backend scripting.</h5>
          <select  class="chosen-select" id="Q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 9</strong></h4>
          <h5>You thrive off of friendly competition.</h5>
          <select  class="chosen-select" id="Q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <h4><strong>Question 10</strong></h4>
          <h5>You would rather go out and do an activity than sit down and watch a movie.</h5>
          <select  class="chosen-select" id="Q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        </div>


      <br />
      <br />

      <button
        type="submit"
        class="btn btn-primary btn-lg btn-block"
        id="submit"
      >
        <i class="fa fa-rocket" aria-hidden="true"></i> Submit
      </button>

      <hr />
      <footer class="footer">
        <div class="container">
          <p>
            <a href="/api/friends">API Friends List</a> |
            <a href="https://github.com/Abeer212/FriendFinder">GitHub Repo</a>
          </p>
        </div>
      </footer>
    </div>

    <div id="results-modal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" data-dismiss="modal">&times;</button>
            <h2 class="modal-title"><strong>Best Match</strong></h2>
          </div>
          <div class="modal-body">
            <h2 id="match-name"></h2>
            <img
              id="match-img"
              src="https://spectatorau.imgix.net/content/uploads/2018/04/a.png?auto=compress,enhance,format&w=820&h=542"
              alt=""
            />
          </div>
          <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var config = {
        ".chosen-select": {},
        ".chosen-select-deselect": {
          allow_single_deselect: true
        },
        ".chosen-select-no-single": {
          disable_search_threshold: 10
        },
        ".chosen-select-no-results": {
          no_results_text: "Oops, nothing found!"
        },
        ".chosen-select-width": {
          width: "95%"
        }
      };

      for (var selector in config) {
        $(selector).chosen(config[selector]);
      }

      $("#submit").on("click", function(event) {
        event.preventDefault();

        function validateForm() {
          var isValid = true;
          $(".form-control").each(function() {
            if ($(this).val() === "") {
              isValid = false;
            }
          });

          $(".chosen-select").each(function() {
            if ($(this).val() === "") {
              isValid = false;
            }
          });
          return isValid;
        }

        if (validateForm()) {
          var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
              $("#Q1").val(),
              $("#Q2").val(),
              $("#Q3").val(),
              $("#Q4").val(),
              $("#Q5").val(),
              $("#Q6").val(),
              $("#Q7").val(),
              $("#Q8").val(),
              $("#Q9").val(),
              $("#Q10").val()
            ]
          };

          $.post("/api/friends", userData, function(data) {
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);

            $("#results-modal").modal("toggle");
          });
        } else {
          alert("Please fill out all fields before submitting!");
        }
      });
    </script>
  </body>
</html>
